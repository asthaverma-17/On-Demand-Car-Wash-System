<section id="userRegister" class="bg-dark vh-100">
  <div class="container h-100">
    <div class="row align-items-center justify-content-center h-100">
      <div class="col-md-6">
        <mat-card color="primary shadow">
          <mat-card-header class="text-center py-3">
            <div class="container text-center">
              <mat-card-title class="fw-bold"
                >USER REGISTERATION</mat-card-title
              >
            </div>
          </mat-card-header>
          <mat-card-content class="text-center">
            <form #f="ngForm" (ngSubmit)="f.form.valid && register()">
              <div class="alert alert-danger" *ngIf="errorMessage">
                {{ errorMessage }}
              </div>
              <div class="row">
                <div class="col-6 mb-3">
                  <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Email</mat-label>
                    <mat-hint>Enter your Email</mat-hint>
                    <input
                      matInput
                      type="email"
                      placeholder="Email"
                      required
                      pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                      #email="ngModel"
                      [class.is-invalid]="email.invalid && email.touched"
                      name="email"
                      id="email"
                      [(ngModel)]="user.email"
                    />
                    <mat-error *ngIf="email.errors?.['required']">
                      Email is required
                    </mat-error>
                    <mat-error *ngIf="email.errors?.['pattern']">
                      Enter correct email
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6 mb-3">
                  <mat-form-field class="full-width" appearance="outline">
                    <mat-hint>Enter your Fullname</mat-hint>
                    <mat-label>Full Name</mat-label>
                    <input
                      matInput
                      placeholder="Full Name"
                      required
                      #fullname="ngModel"
                      [class.is-invalid]="fullname.invalid && fullname.touched"
                      name="fullname"
                      id="fullname"
                      [(ngModel)]="user.fullName"
                      pattern="[a-zA-Z ]{5,}"
                    />

                    <mat-error *ngIf="fullname.errors?.['required']">
                      Full name is required
                    </mat-error>
                    <mat-error *ngIf="fullname.errors?.['pattern']">
                      Invalid Name
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div
                ngModelGroup="passwordGroup"
                [class.is-invalid]="confrimpassword.invalid && confrimpassword.touched && !confrimpassword.errors?.['required']"
              >
                <div class="row">
                  <div class="col-6 mb-3">
                    <mat-form-field class="full-width" appearance="outline">
                      <mat-label>Password</mat-label>
                      <input
                        matInput
                        type="password"
                        placeholder="Password"
                        id="password"
                        (input)="
                          confrimpassword.control.updateValueAndValidity()
                        "
                        name="password"
                        [class.is-invalid]="
                          password.invalid && password.touched
                        "
                        [(ngModel)]="user.password"
                        #password="ngModel"
                        required
                      />
                      <mat-hint>Choose secure password</mat-hint>
                      <mat-error *ngIf="password.errors?.['required']">
                        Password is required
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <div class="col-6 mb-3">
                    <mat-form-field class="full-width" appearance="outline">
                      <mat-label>Confirm Password</mat-label>
                      <input
                        matInput
                        type="password"
                        placeholder="Confirm Password"
                        id="confrimpassword"
                        name="confrimpassword"
                        appConfrimEqualValidator="password"
                        [class.is-invalid]="
                          confrimpassword.invalid && confrimpassword.touched
                        "
                        [(ngModel)]="user.confrimpassword"
                        #confrimpassword="ngModel"
                        required
                      />
                      <mat-hint>Enter Confirm password</mat-hint>

                      <mat-error *ngIf="confrimpassword.errors?.['required']">
                        Comfirm Password is required
                      </mat-error>
                      <mat-error
                        *ngIf="confrimpassword.touched && confrimpassword.errors?.['notEqual'] && !confrimpassword.errors?.['required'] "
                        >Password and Confirm Password does not match</mat-error
                      >
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6 mb-3">
                  <mat-form-field class="full-width" appearance="outline">
                    <mat-label>username</mat-label>
                    <input
                      matInput
                      placeholder="username"
                      required
                      #username="ngModel"
                      [class.is-invalid]="username.invalid && username.touched"
                      name="username"
                      pattern="[A-Za-z]{6,}"
                      id="username"
                      [(ngModel)]="user.username"
                    />
                    <mat-hint>Enter your username</mat-hint>
                    <mat-error *ngIf="username.errors?.['required']">
                      username is required
                    </mat-error>
                    <mat-error *ngIf="username.errors?.['pattern']">
                      Enter min 6 letters username
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6 mb-3">
                  <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Phone Number</mat-label>
                    <mat-hint>Enter Valid Phone Number</mat-hint>
                    <input
                      matInput
                      type="tel"
                      placeholder="PhoneNumber"
                      required
                      pattern="^((\\+91-?)|0)?[0-9]{10}$"
                      #phoneNumber="ngModel"
                      [class.is-invalid]="
                        phoneNumber.invalid && phoneNumber.touched
                      "
                      name="phoneNumber"
                      id="phoneNumber"
                      [(ngModel)]="user.phoneNumber"
                    />
                    <mat-error *ngIf="phoneNumber.errors?.['required']">
                      Phone Number is required
                    </mat-error>
                    <mat-error *ngIf="phoneNumber.errors?.['pattern']">
                      Enter 10 digit phone Number
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="container text-center">
                <button
                  type="submit"
                  [disabled]="f.form.invalid"
                  mat-raised-button
                  color="primary"
                  style="font-family: 'Quicksand', sans-serif"
                >
                  Register
                </button>
              </div>
              <div class="inputBx">
                <br />
                <p><a href="/login">Already have an account?</a></p>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
</section>
